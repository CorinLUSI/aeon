{"version":3,"file":"aeon.js","sources":["../src/base.js","../src/aeon.js","../src/select.js","../src/calendar.js","../src/date-picker.js"],"sourcesContent":["class BaseElement extends HTMLElement {\n  static get props() {\n    return {};\n  }\n\n  static get observedAttributes() {\n    return Object.keys(this.props)\n      .filter(propName => {\n        return [Boolean, Number, String].includes(this.props[propName].type);\n      })\n      .map(propName => {\n        return this.attributeName(propName);\n      });\n  }\n\n  static attributeName(propName) {\n    return propName.replace(/([a-zA-Z])(?=[A-Z])/g, '$1-').toLowerCase();\n  }\n\n  constructor(useShadow = true, options = {}) {\n    super();\n\n    this._ = this;\n    this.$ = {};\n\n    this.attrToProp = {};\n    this.propToAttr = {};\n    Object.keys(this.constructor.props).forEach(name => {\n      const attrName = this.constructor.attributeName(name);\n      this.attrToProp[attrName] = name;\n      this.propToAttr[name] = attrName;\n    });\n\n    if (useShadow) {\n      this.attachShadow({ mode: 'open', ...options });\n      this._ = this.shadowRoot;\n    }\n\n    const initialProps = Object.keys(this.constructor.props).reduce(\n      (all, propName) => {\n        return {\n          ...all,\n          [propName]: this[propName]\n        };\n      },\n      {}\n    );\n\n    Promise.resolve().then(() => {\n      this._props = {};\n\n      Object.keys(this.constructor.props).forEach(propName => {\n        const attrName = this.propToAttr[propName];\n\n        const initialValue = this.hasAttribute(attrName)\n          ? this.getAttribute(attrName)\n          : initialProps[propName] !== undefined\n          ? initialProps[propName]\n          : this[propName];\n\n        Object.defineProperty(this, propName, {\n          set: this.setter(propName),\n          get: this.getter(propName)\n        });\n\n        this[propName] = initialValue;\n      });\n    });\n\n    this._renderPromise = null;\n    this._isConnected = false;\n\n    this._triggers = {};\n  }\n\n  connectedCallback() {\n    this._isConnected = true;\n\n    this._render(true, true);\n  }\n\n  disconnectedCallback() {\n    this._isConnected = false;\n  }\n\n  _requestRender() {\n    if (!this._renderPromise) {\n      this._renderPromise = Promise.resolve().then(() => {\n        this._render();\n      });\n    }\n  }\n\n  _render(force = false, first = false) {\n    if (\n      !force &&\n      (!this.shouldRender(this._triggers) ||\n        !Object.keys(this._triggers).length)\n    ) {\n      return;\n    }\n\n    this._renderPromise = Promise.resolve().then(() => {\n      if (first) {\n        this.firstRender(this._, this._triggers);\n\n        this.$ = [...this._.querySelectorAll('[id]')].reduce((all, el) => {\n          return {\n            ...all,\n            [el.id]: el\n          };\n        }, {});\n\n        this.firstRendered(this._, this._triggers);\n      }\n\n      this.render(this._, this._triggers);\n      this.rendered(this._, this._triggers);\n\n      this._renderPromise = null;\n      this._triggers = {};\n    });\n  }\n\n  forceRender() {\n    this._render(true);\n  }\n\n  shouldRender() {\n    return true;\n  }\n\n  firstRender() {}\n\n  render() {}\n\n  firstRendered() {}\n\n  rendered() {}\n\n  setter(propName) {\n    const attrName = this.propToAttr[propName];\n\n    return value => {\n      if (this._props[propName] === value) return;\n\n      if (!(propName in this._triggers)) {\n        this._triggers[propName] = this._props[propName];\n      }\n\n      this._props[propName] = value;\n\n      const propertyInfo = this.constructor.props[propName];\n\n      if ([Boolean, String, Number].includes(propertyInfo.type)) {\n        if (this.constructor.observedAttributes.includes(attrName)) {\n          let attributeValue = value;\n\n          if (propertyInfo.type === Boolean) {\n            attributeValue = attributeValue || attributeValue === '';\n            if (attributeValue) {\n              this.setAttribute(attrName, '');\n            } else {\n              this.removeAttribute(attrName);\n            }\n          } else if (this.getAttribute(attrName) !== attributeValue) {\n            if ([null, undefined].includes(attributeValue)) {\n              this.removeAttribute(attrName);\n            } else {\n              this.setAttribute(attrName, attributeValue);\n            }\n          }\n        }\n      }\n\n      if (this._isConnected) {\n        this._requestRender();\n      }\n    };\n  }\n\n  getter(propName) {\n    return () => this._props[propName];\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    const propName = this.attrToProp[attrName];\n\n    const propertyInfo = this.constructor.props[propName];\n\n    let propertyValue = newValue;\n\n    switch (propertyInfo.type) {\n      case Boolean:\n        propertyValue = propertyValue === '';\n        break;\n      case Number:\n        propertyValue = Number(propertyValue);\n        break;\n      case String:\n        break;\n    }\n\n    if (this[propName] !== propertyValue) {\n      this[propName] = propertyValue;\n    }\n  }\n}\n\nexport default BaseElement;\n","import DatePicker from './date-picker.js';\nimport Select from './select.js';\nimport Calendar from './calendar.js';\n\ncustomElements.define('aeon-select', Select);\ncustomElements.define('aeon-calendar', Calendar);\ncustomElements.define('aeon-datepicker', DatePicker);\n","import BaseElement from './base.js';\n\nclass Select extends BaseElement {\n  static get props() {\n    return {\n      value: {\n        type: Number\n      },\n      items: {\n        type: Array\n      }\n    };\n  }\n\n  constructor() {\n    super();\n\n    this.items = [];\n  }\n\n  firstRender(_) {\n    _.innerHTML = `\n      <style>\n        select {\n          -webkit-appearance: none;\n          -moz-appearance: none;\n          padding: 0.5rem;\n          padding-right: 1.5rem;\n          font-family: inherit;\n          font-size: inherit;\n          border-radius: 0;\n          border: 1px solid var(--hintColor);\n          background-color: transparent;\n          color: var(--color);\n          width: 100%;\n        }\n\n        .select {\n          position: relative;\n        }\n\n        .select .indicator {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          right: 0.2rem;\n          pointer-events: none;\n          display: flex;\n          align-items: center;\n        }\n      </style>\n\n      <div class=\"select\">\n        <select id=\"select\">\n        </select>\n        <span class=\"indicator\">\n          <svg width=\"24\" height=\"24\">\n            <g><path fill=\"currentColor\" d=\"M7 10l5 5 5-5z\"></path></g>\n          </svg>\n        </span>\n      </div>\n    `;\n  }\n\n  // simulate focus event which doesn't exist as `this` doesn't have (not do\n  // we want it to have) a tabIndex\n  focus() {\n    this.$.select.focus();\n  }\n\n  firstRendered(_) {\n    this.$.select.addEventListener('change', event => {\n      this.value = event.target.value;\n    });\n  }\n\n  render(_, triggers) {\n    if ('value' in triggers) {\n      this.dispatchEvent(\n        new Event('change', {\n          bubbles: true\n        })\n      );\n    }\n\n    this.$.select.innerHTML = this.items\n      .map(item => `<option value=\"${item.value}\">${item.name}</option>`)\n      .join('');\n\n    this.$.select.value = this.value;\n  }\n}\n\nexport default Select;\n","import BaseElement from './base.js';\n\nclass Calendar extends BaseElement {\n  static get props() {\n    return {\n      date: {\n        type: String\n      },\n      time: {\n        type: String\n      },\n      value: {\n        type: Object\n      },\n      showTime: {\n        type: Boolean\n      },\n      confirmOnDate: {\n        type: Boolean\n      },\n      locale: {\n        type: String\n      },\n      startYear: {\n        type: String\n      },\n      endYear: {\n        type: String\n      },\n      startDay: {\n        type: String\n      },\n      days: {\n        type: Array\n      },\n      year: {\n        type: Number\n      },\n      month: {\n        type: Number\n      },\n      day: {\n        type: Number\n      },\n      hours: {\n        type: Number\n      },\n      minutes: {\n        type: Number\n      },\n      open: {\n        type: Boolean\n      }\n    };\n  }\n\n  constructor() {\n    super();\n\n    this.showTime = false;\n    this.confirmOnDate = false;\n    this.days = [];\n    this.open = false;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.addEventListener('keydown', this.onKeyDown.bind(this));\n  }\n\n  firstRender(_) {\n    _.innerHTML = `\n      <style>\n        :host {\n          display: none;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n\n          padding: 0.2rem;\n          background-color: var(--bgColor);\n        }\n\n        :host([open]) {\n          display: flex;\n        }\n\n        .week {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .day, .date, button {\n          color: var(--color);\n          background-color: transparent;\n          border: 0;\n          box-sizing: border-box;\n          width: 2.4rem;\n          height: 2.4rem;\n          padding: 0;\n          font-family: inherit;\n          font-size: calc(2.4rem / 3);\n\n          text-transform: uppercase;\n\n          flex-grow: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .date {\n          border: 1px solid var(--hintColor);\n          border-width: 0 0 1px 1px;\n        }\n\n        .date:last-child {\n          border-right-width: 1px;\n        }\n\n        .date.last + .spacer {\n          border-left-width: 1px;\n        }\n\n        .week:nth-child(2) .date:not(.spacer) {\n          border-top-width: 1px;\n        }\n\n        .week:last-child .spacer {\n          border-right-width: 0;\n          border-bottom-width: 0;\n        }\n\n        .date.today {\n          font-weight: bold;\n        }\n\n        .date:hover, .date.today {\n          font-size: 1.3rem;\n        }\n\n        .date.spacer {\n          border-left-width: 0;\n          pointer-events: none;\n        }\n\n        #buttons {\n          width: 100%;\n          display: flex;\n          justify-content: space-between;\n          margin-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n        }\n\n        #year-month, #hours-minutes {\n          display: flex;\n          width: 100%;\n        }\n\n        #year-month aeon-select {\n          width: 50%;\n        }\n\n        #year-month aeon-select + aeon-select {\n          margin-left: 0.5rem;\n        }\n\n        #hours-minutes {\n          padding-top: 0.5em;\n          margin-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n          display: none;\n          justify-content: center;\n          align-items: center;\n        }\n\n        #hours-minutes aeon-select {\n          width: 3.5rem;\n        }\n\n        #hours-minutes aeon-select#hours {\n          margin-right: 0.2em;\n        }\n\n        #hours-minutes aeon-select#minutes {\n          margin-left: 0.2em;\n        }\n\n        :host([show-time]) #hours-minutes {\n          display: flex;\n        }\n      </style>\n\n      <div>\n        <div id=\"year-month\">\n          <aeon-select id=\"year\"></aeon-select>\n          <aeon-select id=\"month\"></aeon-select>\n        </div>\n        <div id=\"calendar\"></div>\n        <div id=\"hours-minutes\">\n          <aeon-select id=\"hours\"></aeon-select>:<aeon-select id=\"minutes\"></aeon-select>\n        </div>\n        <div id=\"buttons\">\n          <button id=\"confirm\" title=\"Confirm\">\n            <svg width=\"24\" height=\"24\">\n              <g><path fill=\"currentColor\" d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"></path></g>\n            </svg>\n          </button>\n          <button id=\"cancel\" title=\"Cancel\">\n            <svg width=\"24\" height=\"24\">\n              <g><path fill=\"currentColor\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></g>\n            </svg>\n          </button>\n          <button id=\"clear\" title='Clear'>\n            <svg width=\"24\" height=\"24\">\n              <g><path fill=\"currentColor\" d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"></path></g>\n            </svg>\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  firstRendered(_) {\n    this.addEventListener('keyup', event => {\n      switch (event.key) {\n        case 'Escape':\n          this.open = false;\n          break;\n      }\n    });\n\n    this.$.year.addEventListener('change', event => {\n      this.year = event.target.value;\n    });\n\n    this.$.month.addEventListener('change', event => {\n      this.month = event.target.value;\n    });\n\n    this.$.hours.items = [...Array(24).keys()].map((dummy, i) => ({\n      name: `${i}`.padStart(2, '0'),\n      value: i\n    }));\n\n    this.$.hours.addEventListener('change', event => {\n      this.hours = event.target.value;\n    });\n\n    this.$.minutes.items = [...Array(60).keys()].map((dummy, i) => ({\n      name: `${i}`.padStart(2, '0'),\n      value: i\n    }));\n\n    this.$.minutes.addEventListener('change', event => {\n      this.minutes = event.target.value;\n    });\n\n    this.$.calendar.addEventListener('click', this.onDateClick.bind(this));\n\n    this.$.cancel.addEventListener('click', () => {\n      this.open = false;\n    });\n\n    this.$.confirm.addEventListener('click', () => {\n      this.confirm();\n    });\n\n    this.$.clear.addEventListener('click', () => {\n      this.dispatchEvent(\n        new Event('clear', {\n          bubbles: true\n        })\n      );\n      this.open = false;\n    });\n  }\n\n  render(_, triggers) {\n    if ('open' in triggers && this.open === false && triggers.open === true) {\n      this.dispatchEvent(\n        new Event('close', {\n          bubbles: true\n        })\n      );\n    }\n\n    if ('year' in triggers || 'month' in triggers || 'day' in triggers) {\n      this.date = this.formatAsDate(this.year, this.month, this.day);\n    }\n\n    if ('hours' in triggers || 'minutes' in triggers) {\n      this.time = this.formatAsTime(this.hours, this.minutes);\n    }\n\n    const now = new Date();\n    now.setMonth(0); // not now.setMonth(0, 1) as this can cause issues - see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setMonth#Description\n    now.setDate(1);\n\n    this.$.year.value = this.year;\n    this.$.year.items = [];\n    for (let i = this.startYear; i <= this.endYear; i++) {\n      this.$.year.items.push({ value: i, name: i });\n    }\n\n    this.$.month.value = this.month;\n    this.$.month.items = [];\n    for (let i = 0; i < 12; i++) {\n      let monthNum = now.getMonth();\n      this.$.month.items.push({\n        value: monthNum,\n        name: now.toLocaleString(this.locale || undefined, { month: 'short' })\n      });\n      now.setMonth(i + 1);\n    }\n    this.$.month.items.sort((a, b) => a.num - b.num);\n\n    now.setMonth(0);\n    now.setDate(1);\n    this.days = [];\n    for (let i = 0; i < 7; i++) {\n      let dayNum = now.getDay();\n      this.days.push({\n        num: dayNum,\n        name: now.toLocaleString(this.locale || undefined, { weekday: 'short' })\n      });\n      now.setDate(i + 2);\n    }\n    const startDayOffset = 7 - this.startDay;\n    this.days.sort(\n      (a, b) => ((a.num + startDayOffset) % 7) - ((b.num + startDayOffset) % 7)\n    );\n\n    this.$.hours.value = this.hours;\n    this.$.minutes.value = this.minutes;\n\n    ////\n\n    let workingDate = new Date(this.year, this.month, 1, 12);\n    const monthStartDay = workingDate.getDay();\n\n    workingDate.setMonth(workingDate.getMonth() + 1);\n    workingDate.setDate(0);\n    const daysInMonth = workingDate.getDate();\n\n    workingDate = new Date(this.year, this.month, 1, 12);\n\n    let started = false;\n    let finished = false;\n    let count = 0;\n\n    this.$.calendar.innerHTML = `\n      <div class=\"week\">\n        ${this.days.map(day => `<div class=\"day\">${day.name}</div>`).join('')}\n      </div>\n\n      ${[0, 1, 2, 3, 4, 5]\n        .map(() => {\n          if (count >= daysInMonth) return null;\n\n          return `\n          <div class=\"week\">\n            ${this.days\n              .map(day => {\n                const dayNum = day.num % 7;\n                if (dayNum === monthStartDay) {\n                  started = true;\n                }\n\n                let date = '';\n                if (started) {\n                  count += 1;\n                  if (count <= daysInMonth) {\n                    date = count;\n                    workingDate.setDate(date);\n                  } else {\n                    finished = true;\n                  }\n                }\n\n                const isToday = count === this.day;\n\n                return `\n                  <button class=\"date ${isToday ? 'today' : ''} ${\n                  !started || finished ? 'spacer' : ''\n                } ${count === daysInMonth ? 'last' : ''}\" data-day=\"${count}\" ${\n                  !started || finished ? \"tabindex='-1' disabled\" : ''\n                }>${date}</button>\n              `;\n              })\n              .join('')}\n          </div>\n         `;\n        })\n        .join('')}\n    `;\n\n    const focusableEls = _.querySelectorAll(\n      'button:not([disabled]), aeon-select'\n    );\n    this._firstFocusableEl = focusableEls[0];\n    this._lastFocusableEl = focusableEls[focusableEls.length - 1];\n  }\n\n  rendered(_, triggers) {\n    if (this.open === true) {\n      if (\n        ('open' in triggers && triggers.open === false) ||\n        'day' in triggers\n      ) {\n        _.querySelector('.today').focus();\n      }\n    }\n  }\n\n  confirm() {\n    this.date = this.formatAsDate(this.year, this.month, this.day);\n    this.time = this.formatAsTime(this.hours, this.minutes);\n\n    this.value = {\n      date: this.date,\n      time: this.time\n    };\n\n    this.dispatchEvent(\n      new Event('change', {\n        bubbles: true\n      })\n    );\n  }\n\n  onKeyDown(event) {\n    if (event.key !== 'Tab') {\n      return;\n    }\n\n    const activeElement = this.shadowRoot.activeElement;\n\n    if (event.shiftKey && activeElement === this._firstFocusableEl) {\n      this._lastFocusableEl.focus();\n      event.preventDefault();\n    } else if (!event.shiftKey && activeElement === this._lastFocusableEl) {\n      this._firstFocusableEl.focus();\n      event.preventDefault();\n    }\n  }\n\n  onDateClick(event) {\n    if (event.target.classList.contains('date')) {\n      const button = event.target;\n      this.day = parseInt(button.dataset.day, 10);\n\n      if (this.confirmOnDate && !this.showTime) {\n        this.confirm();\n      }\n    }\n  }\n\n  formatAsDate(year, month, day) {\n    return `${year}-${`${month + 1}`.padStart(2, '0')}-${`${day}`.padStart(\n      2,\n      '0'\n    )}`;\n  }\n\n  formatAsTime(hours, minutes) {\n    return `${`${hours}`.padStart(2, '0')}:${`${minutes}`.padStart(2, '0')}`;\n  }\n}\n\nexport default Calendar;\n","import BaseElement from './base.js';\n\nclass DatePicker extends BaseElement {\n  static get props() {\n    return {\n      date: {\n        type: String\n      },\n      time: {\n        type: String\n      },\n      value: {\n        type: Object\n      },\n      showTime: {\n        type: Boolean\n      },\n      confirmOnDate: {\n        type: Boolean\n      },\n      locale: {\n        type: String\n      },\n      dateStyle: {\n        type: Object\n      },\n      startYear: {\n        type: String\n      },\n      endYear: {\n        type: String\n      },\n      startDay: {\n        type: String\n      },\n      defaultDate: {\n        type: String\n      },\n      defaultTime: {\n        type: String\n      },\n      hasNative: {\n        type: Boolean\n      },\n      useNative: {\n        type: Boolean\n      },\n      alignTop: {\n        type: Boolean\n      },\n      alignRight: {\n        type: Boolean\n      }\n    };\n  }\n\n  constructor() {\n    super();\n\n    const now = new Date();\n\n    this.showTime = false;\n    this.confirmOnDate = false;\n    this.alignTop = false;\n    this.alignRight = false;\n    this.dateStyle = {};\n    this.startYear = now.getFullYear() - 100;\n    this.endYear = now.getFullYear() + 5;\n    this.startDay = 1;\n\n    try {\n      const input = document.createElement('input');\n      input.type = 'date';\n      this.hasNative = input.type === 'date';\n    } catch (error) {\n      this.hasNative = false;\n    }\n\n    this.onLabelClick = this.onLabelClick.bind(this);\n    this.onClickOutside = this.onClickOutside.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    document.addEventListener('click', this.onClickOutside);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._dateInput) {\n      [...this._dateInput.labels].forEach(labelEl => {\n        labelEl.removeEventListener('click', this.onLabelClick);\n      });\n    }\n    document.removeEventListener('click', this.onClickOutside);\n  }\n\n  firstRender(_) {\n    _.innerHTML = `\n      <style>\n        :host {\n          position: relative;\n          display: inline;\n\n          --rgb: var(--cal-rgb, 0, 0, 0);\n          --bgRgb: var(--cal-bg-rgb, 248, 248, 248);\n          --color: rgb(var(--rgb));\n          --hintColor: rgba(var(--rgb), 0.2);\n          --bgColor: rgb(var(--bgRgb));\n\n          color: var(--color);\n        }\n\n        slot:not([name]) {\n          display: none;\n        }\n\n        :host([has-native][use-native]) slot {\n          display: none;\n        }\n\n        :host([has-native][use-native]) slot:not([name]) {\n          display: contents;\n        }\n\n        aeon-calendar {\n          position: absolute;\n          top: 100%;\n          left: 0;\n        }\n\n        :host([align-top]) aeon-calendar {\n          top: auto;\n          bottom: 100%;\n        }\n\n        :host([align-right]) aeon-calendar {\n          left: auto;\n          right: 0;\n        }\n\n        @media (max-width: 640px) {\n          aeon-calendar,\n          :host([align-top]) aeon-calendar,\n          :host([align-right]) aeon-calendar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n          }\n        }\n      </style>\n\n      <slot></slot>\n      <slot name=\"output\"></slot>\n\n      <aeon-calendar id=\"calendar\"></aeon-calendar>\n    `;\n  }\n\n  firstRendered(_) {\n    const slot = _.querySelector('slot');\n    slot.addEventListener('slotchange', event => {\n      const elements = slot\n        .assignedNodes()\n        .filter(el => el.nodeType != Node.TEXT_NODE);\n      this._dateInput = elements.find(el => el.getAttribute('type') === 'date');\n\n      if (this._dateInput) {\n        this._output.placeholder = this._dateInput.placeholder;\n        [...this._dateInput.labels].forEach(labelEl => {\n          labelEl.addEventListener('click', this.onLabelClick);\n        });\n        this.date = this._dateInput.value;\n      }\n\n      this._timeInput = elements.find(el => el.getAttribute('type') === 'time');\n\n      if (this._timeInput) {\n        this.showTime = true;\n        this.time = this._timeInput.value;\n      }\n    });\n\n    this._output = document.createElement('input');\n    this._output.slot = 'output';\n    this._output.readOnly = true;\n    this._output.addEventListener('click', () => {\n      this.openCalendar();\n    });\n    this.appendChild(this._output);\n\n    this.addEventListener('keyup', event => {\n      switch (event.key) {\n        case ' ':\n          if (!this.$.calendar.open) {\n            this.openCalendar();\n          }\n          break;\n      }\n    });\n\n    this.$.calendar.addEventListener('change', event => {\n      this.date = event.target.value.date;\n      this.time = event.target.value.time;\n      this.closeCalendar();\n    });\n\n    this.$.calendar.addEventListener('clear', () => {\n      this.date = '';\n    });\n\n    this.$.calendar.addEventListener('close', () => {\n      if (!this._dontFocus) {\n        this._output.focus();\n      }\n\n      this._dontFocus = false;\n    });\n  }\n\n  render(_, triggers) {\n    if ('date' in triggers || 'time' in triggers) {\n      this.value = {\n        date: this.date,\n        time: this.time\n      };\n\n      this.updateFromString(this.date, this.time);\n\n      this.dispatchEvent(\n        new Event('change', {\n          bubbles: true\n        })\n      );\n    }\n\n    if (\n      'locale' in triggers ||\n      'startYear' in triggers ||\n      'endYear' in triggers ||\n      'startDay' in triggers ||\n      'showTime' in triggers ||\n      'confirmOnDate' in triggers\n    ) {\n      this.updateFromString(this.date, this.time);\n    }\n  }\n\n  update(date = null) {\n    const validDate = date && !isNaN(date);\n    let showDate = date;\n\n    if (!validDate) {\n      const date = this.defaultDate;\n      const time = this.defaultTime;\n      showDate = this.parseDate(date, time);\n    }\n\n    const cal = this.$.calendar;\n    cal.year = showDate.getFullYear();\n    cal.month = showDate.getMonth();\n    cal.day = showDate.getDate();\n    cal.hours = showDate.getHours();\n    cal.minutes = showDate.getMinutes();\n    cal.locale = this.locale;\n    cal.startYear = this.startYear;\n    cal.endYear = this.endYear;\n    cal.startDay = this.startDay;\n    cal.showTime = this.showTime;\n    cal.confirmOnDate = this.confirmOnDate;\n\n    if (validDate) {\n      const dateString = new Intl.DateTimeFormat(this.locale || undefined, {\n        year: 'numeric',\n        month: 'numeric',\n        day: 'numeric',\n        ...(this.showTime\n          ? {\n              hour: 'numeric',\n              minute: 'numeric'\n            }\n          : {}),\n        ...this.dateStyle\n      }).format(date);\n\n      this._output.value = dateString;\n      if (this._dateInput) {\n        this._dateInput.value = this.date;\n      }\n      if (this._timeInput) {\n        this._timeInput.value = this.time;\n      }\n    } else {\n      this._output.value = '';\n      if (this._dateInput) {\n        this._dateInput.value = '';\n      }\n      if (this._timeInput) {\n        this._timeInput.value = '';\n      }\n    }\n  }\n\n  openCalendar() {\n    const rect = this.getBoundingClientRect();\n    const fromTop = rect.top;\n    const fromBottom = window.innerHeight - rect.bottom;\n    const fromLeft = rect.left;\n    const fromRight = window.innerWidth - rect.right;\n\n    this.alignTop = fromBottom < fromTop;\n    this.alignRight = fromRight < fromLeft;\n\n    this.$.calendar.open = true;\n  }\n\n  closeCalendar(dontFocus = false) {\n    this.$.calendar.open = false;\n\n    this._dontFocus = dontFocus;\n  }\n\n  parseDate(date, time) {\n    try {\n      const dateParts = date.split('-');\n      const timeParts = (time || this.defaultTime || '00:00').split(':');\n\n      return new Date(\n        dateParts[0],\n        parseInt(dateParts[1], 10) - 1,\n        dateParts[2],\n        timeParts[0],\n        timeParts[1]\n      );\n    } catch (error) {\n      return new Date();\n    }\n  }\n\n  updateFromString(date, time) {\n    this.update(this.parseDate(date, time));\n  }\n\n  onLabelClick(event) {\n    if (!this.useNative || !this.hasNative) {\n      event.preventDefault();\n      this._output.focus();\n    }\n  }\n\n  onClickOutside(event) {\n    if (this.$.calendar.open) {\n      const outsideComponent = !event\n        .composedPath()\n        .some(element => element === this);\n\n      if (outsideComponent) {\n        this.closeCalendar(true);\n      }\n    }\n  }\n}\n\nexport default DatePicker;\n"],"names":["BaseElement","HTMLElement","props","observedAttributes","Object","keys","this","filter","propName","Boolean","Number","String","includes","type","map","attributeName","[object Object]","replace","toLowerCase","useShadow","options","super","_","$","attrToProp","propToAttr","constructor","forEach","name","attrName","attachShadow","mode","shadowRoot","initialProps","reduce","all","Promise","resolve","then","_props","initialValue","hasAttribute","getAttribute","undefined","defineProperty","set","setter","get","getter","_renderPromise","_isConnected","_triggers","_render","force","first","shouldRender","length","firstRender","querySelectorAll","el","id","firstRendered","render","rendered","value","propertyInfo","attributeValue","setAttribute","removeAttribute","_requestRender","oldValue","newValue","propertyValue","customElements","define","items","Array","innerHTML","select","focus","addEventListener","event","target","triggers","dispatchEvent","Event","bubbles","item","join","date","time","showTime","confirmOnDate","locale","startYear","endYear","startDay","days","year","month","day","hours","minutes","open","connectedCallback","onKeyDown","bind","key","dummy","i","padStart","calendar","onDateClick","cancel","confirm","clear","formatAsDate","formatAsTime","now","Date","setMonth","setDate","push","monthNum","getMonth","toLocaleString","sort","a","b","num","dayNum","getDay","weekday","startDayOffset","workingDate","monthStartDay","daysInMonth","getDate","started","finished","count","focusableEls","_firstFocusableEl","_lastFocusableEl","querySelector","activeElement","shiftKey","preventDefault","classList","contains","button","parseInt","dataset","dateStyle","defaultDate","defaultTime","hasNative","useNative","alignTop","alignRight","getFullYear","input","document","createElement","error","onLabelClick","onClickOutside","disconnectedCallback","_dateInput","labels","labelEl","removeEventListener","slot","elements","assignedNodes","nodeType","Node","TEXT_NODE","find","_output","placeholder","_timeInput","readOnly","openCalendar","appendChild","closeCalendar","_dontFocus","updateFromString","validDate","isNaN","showDate","parseDate","cal","getHours","getMinutes","dateString","Intl","DateTimeFormat","hour","minute","format","rect","getBoundingClientRect","fromTop","top","fromBottom","window","innerHeight","bottom","fromLeft","left","fromRight","innerWidth","right","dontFocus","dateParts","split","timeParts","update","composedPath","some","element"],"mappings":"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"}